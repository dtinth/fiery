<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.9.0/css/tachyons.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cousine:400" />
  <style>
    pre, code, .mono { font-family: Cousine, monospace; }
    img.emoji { height: 1em; width: 1em; margin: 0 .05em 0 .1em; vertical-align: -0.1em; }
    /**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

    .pulsate { animation: 1s pulsate infinite; }
    @keyframes pulsate { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
  </style>
  <title>fiery</title>
</head>
<body class="bg-near-black light-gray f4 sans-serif">
<!--
###########################################################
### THIS FILE IS AUTOMATICALLY GENERATED FROM README.md ###
###########################################################
-->
<main class="mw7 pb5 center lh-copy">
<h1 id="fiery-%F0%9F%94%A5" class="yellow f-headline lh-solid mb0"><a href="https://github.com/dtinth/fiery" class="yellow">fiery</a> <img class="emoji" draggable="false" alt="&#x1F525;" src="https://twemoji.maxcdn.com/2/svg/1f525.svg"></h1>
<p class="f2 mt2">fiery <img class="emoji" draggable="false" alt="&#x1F525;" src="https://twemoji.maxcdn.com/2/svg/1f525.svg"> is the quickest and easiest way to use <strong class="light-yellow">Firebase Authentication</strong> and <strong class="light-yellow">Firebase Realtime Database</strong> in a React app. It uses latest React features and patterns such as <a href="https://reactjs.org/docs/render-props.html" class="light-pink">render props</a>, <a href="https://reactjs.org/docs/hooks-intro.html" class="light-pink">hooks</a>, and <a href="https://reactjs.org/docs/react-api.html#reactsuspense" class="light-pink">suspense</a>.</p>
<p><strong class="light-yellow">Jump to:</strong> <a href="#installation" class="light-pink">Installation</a> &#xB7; <a href="#demo" class="light-pink">Demo</a> &#xB7; <a href="#api-usage" class="light-pink">API Usage</a> &#xB7; <a href="#development" class="light-pink">Development</a> &#xB7; <a href="#license" class="light-pink">License</a></p>
<p><em>Not production-ready:</em> Although I tested it in my projects and small real-world scenarios, they are only small apps and quick prototypes. Contributions are welcome to make this more suitable for production usage.</p>
<h2 id="installation" class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">Installation</h2>
<p>You can install fiery <img class="emoji" draggable="false" alt="&#x1F525;" src="https://twemoji.maxcdn.com/2/svg/1f525.svg"> from npm:</p>
<pre class="washed-green bg-dark-green pa3"><code>npm install --save fiery
</code></pre>
<p>If you&#x2019;re using <a href="https://reactjs.org/docs/create-a-new-react-app.html#create-react-app" class="light-pink">Create React App</a> or a module bundler such as webpack or parcel, you can import fiery using the <code class="light-green">import</code> statement:</p>
<pre class="washed-green bg-dark-green pa3"><code>import fiery from &apos;fiery&apos;
</code></pre>
<p>If you&#x2019;re <a href="https://reactjs.org/docs/add-react-to-a-website.html" class="light-pink">using React with no build tooling</a>, a UMD version is also available (make sure to include <code class="light-green">react</code>, <code class="light-green">react-dom</code>, and <code class="light-green">firebase</code> before including <code class="light-green">fiery</code>):</p>
<pre class="washed-green bg-dark-green pa3"><code>&lt;script src=&quot;https://unpkg.com/fiery@0.4.1/umd/fiery.js&quot;&gt;
&lt;/script&gt;
</code></pre>
<p><strong class="light-yellow">Important:</strong> Make sure you are using a version of React that supports the <a href="https://reactjs.org/docs/hooks-intro.html" class="light-pink">Hooks API</a>.</p>
<h2 id="demo" class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">Demo</h2>
<p><a href="https://dtinth.github.io/fiery/#DistributedCounter" class="light-pink">Try it out!</a></p>
<!--
#######################
### Require scripts ###
#######################
-->

          <script crossorigin src="https://unpkg.com/react@16.8.0-alpha.1/umd/react.development.js"></script>
          <script crossorigin src="https://unpkg.com/react-dom@16.8.0-alpha.1/umd/react-dom.development.js"></script>
          <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
          <script src="https://www.gstatic.com/firebasejs/4.6.1/firebase.js"></script>
          <script>
            var config = {
              apiKey: "AIzaSyDLDD_KtKkfAj9sgOHupxUuDt_p8g19bkU",
              authDomain: "fiery-react.firebaseapp.com",
              databaseURL: "https://fiery-react.firebaseio.com",
              projectId: "fiery-react",
              storageBucket: "",
              messagingSenderId: "284926450412"
            };
            firebase.initializeApp(config);
          </script>
          <script>
            // For file: protocol or localhost, load fiery from local file.
            if (location.protocol === 'file:' || location.hostname === 'localhost') {
              document.write('<script src="../umd/fiery.js"><\/script>')
            }
          </script>
          <script>
            // Otherwise, load fiery from CDN.
            if (typeof fiery === 'undefined') {
              document.write('<script src="https://unpkg.com/fiery@0.4.1/umd/fiery.js"><\/script>')
            }
          </script>
        


<!--
##############
### UI kit ###
##############
-->
<script type="text/babel">
window.UI = (function() {
  function Button({ children, onClick }) {
    return (
      <a
        className="f6 link dim br2 ph3 pv2 dib white bg-dark-blue"
        href="javascript://"
        onClick={onClick}
      >
        {children}
      </a>
    )
  }

  function ErrorMessage({ error, retry }) {
    return (
      <div className="pa2 bg-washed-red br2 dark-red">
        <strong className="dark-red">Something went wrong!</strong>{' '}
        {String(error)}
        {!!retry && (
          <div>
            <Button onClick={retry}>Retry</Button>
          </div>
        )}
      </div>
    )
  }

  function Loading({ message = 'Loading…' }) {
    return (
      <div className="pulsate">
        <em>{message}</em>
      </div>
    )
  }

  function AuthenticationWall({ onSignIn }) {
    return (
      <div className="pa3 tc bg-white-10">
        <strong className="db mb2">Sign in to write on this guestbook</strong>
        <Button onClick={onSignIn}>Sign in with GitHub</Button>
      </div>
    )
  }

  function NavBar({ title, children }) {
    return (
      <nav className="dt w-100 border-box pa2 ph3 bg-purple">
        <a className="dtc v-mid white-60 link dim w-25" href="#" title="Home">
          {title}
        </a>
        <div className="dtc v-mid w-75 tr">{children}</div>
      </nav>
    )
  }

  NavBar.Item = function NavBarItem({ label, onClick, disabled, title }) {
    if (disabled) {
      return <span className="white-40 f6 f5-ns dib ml3">{label}</span>
    }
    return (
      <a
        className="link dim white-70 f6 f5-ns dib ml3"
        href="javascript://"
        title={title}
        onClick={onClick}
      >
        {label}
      </a>
    )
  }

  function EntryList({ children }) {
    return <div className="pa3 bg-black-50">{children}</div>
  }
  EntryList.Item = function EntryListItem({ text, name }) {
    return (
      <div>
        <strong>{name}: </strong>
        {text}
      </div>
    )
  }

  function GuestbookInputField() {
    return (
      <div className="cf">
        <input
          className="f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns sans-serif"
          placeholder="What’s on your mind?"
          type="text"
          name="text"
        />
        <input
          className="f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns sans-serif"
          type="submit"
          name="submitButton"
          value="Send"
        />
      </div>
    )
  }
  function EntryForm({ onSend }) {
    return (
      <form
        className="bg-white-10 pa3"
        onSubmit={e => {
          e.preventDefault()
          const input = e.target.text
          const text = input.value
          input.value = ''
          onSend(text).catch(e => window.alert(`Error: ${e}`))
        }}
      >
        <GuestbookInputField />
      </form>
    )
  }
  function Tabs({ tabs, currentTab, onTabChange }) {
    return (
      <nav className="pa2 ph3 bg-purple">
        {tabs.map(tab => (
          <a
            key={tab}
            className={
              'link white-70 f6 f5-ns dib mr3 ' +
              (tab === currentTab ? 'b' : 'dim')
            }
            href="javascript:"
            onClick={() => onTabChange(tab)}
          >
            {tab}
          </a>
        ))}
      </nav>
    )
  }
  function ContentBox({ children }) {
    return <div className="pa3 bg-black-50">{children}</div>
  }
  class ErrorBoundary extends React.Component {
    constructor(props) {
      super(props)
      this.state = { error: null }
      this.retry = () => this.setState({ error: null })
    }
    static getDerivedStateFromError(error) {
      return { error }
    }
    render() {
      const error = this.state.error
      if (error) return <ErrorMessage error={error} retry={this.retry} />
      return this.props.children
    }
  }

  return {
    Button,
    ErrorMessage,
    Loading,
    AuthenticationWall,
    NavBar,
    EntryList,
    EntryForm,
    Tabs,
    ContentBox,
    ErrorBoundary
  }
})()

</script>


<!--
################################
### Demo: DistributedCounter ###
################################
-->

      <article class="br3 hidden ba b--black-10 mv4">
        <h1 class="f4 bg-orange light-yellow br3 br--top mv0 pv2 ph3">Demo: DistributedCounter</h1>
        <div class="pa3 bt bg-dark-gray b--white-10" id="DistributedCounter"></div>
      </article>
    

<pre class="code mono f6 bg-dark-gray pa3 lh-title" data-demo="DistributedCounter"><span class="token comment">// Demo: DistributedCounter</span>
<span class="token comment">// This demo app uses only Functional Components!</span>

<span class="token comment">// Normal Firebase stuff...</span>
<span class="token comment">//</span>
<span class="token keyword">const</span> counterRef <span class="token operator">=</span> firebase<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&apos;demos/counter&apos;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">counterDecrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counterRef<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">counterIncrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> counterRef<span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">DistributedCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// The `useFirebaseDatabase` hook makes this component automatically</span>
  <span class="token comment">// subscribe to Firebase Realtime Database. When the data change,</span>
  <span class="token comment">// this component is automatically re-rendered.</span>
  <span class="token comment">//</span>
  <span class="token comment">// This is possible thanks to the Hooks API, introduced in React 16.7.0-alpha.0.</span>
  <span class="token comment">//</span>
  <span class="token keyword">const</span> counterState <span class="token operator">=</span> fiery<span class="token punctuation">.</span><span class="token function">useFirebaseDatabase</span><span class="token punctuation">(</span>counterRef<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> display<span class="token punctuation">:</span> <span class="token string">&apos;flex&apos;</span><span class="token punctuation">,</span> alignItems<span class="token punctuation">:</span> <span class="token string">&apos;center&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterDecrement<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token operator">-</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.Button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token punctuation">:</span> <span class="token string">&apos;center&apos;</span><span class="token punctuation">,</span> margin<span class="token punctuation">:</span> <span class="token string">&apos;0 auto&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Loading counter value<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token punctuation">:</span> counterState<span class="token punctuation">.</span>failed <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorMessage</span>
            <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>error<span class="token punctuation">}</span></span>
            <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>retry<span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterIncrement<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token operator">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.Button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DistributedCounter</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;DistributedCounter&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</pre><script type="text/babel">// Demo: DistributedCounter
// This demo app uses only Functional Components!

// Normal Firebase stuff...
//
const counterRef = firebase.database().ref('demos/counter')
const counterDecrement = () => counterRef.transaction(c => c - 1)
const counterIncrement = () => counterRef.transaction(c => c + 1)

function DistributedCounter() {
  // The `useFirebaseDatabase` hook makes this component automatically
  // subscribe to Firebase Realtime Database. When the data change,
  // this component is automatically re-rendered.
  //
  // This is possible thanks to the Hooks API, introduced in React 16.7.0-alpha.0.
  //
  const counterState = fiery.useFirebaseDatabase(counterRef)
  return (
    <div style={{ display: 'flex', alignItems: 'center' }}>
      <div>
        <UI.Button onClick={counterDecrement}>-</UI.Button>
      </div>
      <div style={{ textAlign: 'center', margin: '0 auto' }}>
        {counterState.loading ? (
          <UI.Loading message="Loading counter value" />
        ) : counterState.failed ? (
          <UI.ErrorMessage
            error={counterState.error}
            retry={counterState.retry}
          />
        ) : (
          <strong>{counterState.data}</strong>
        )}
      </div>
      <div>
        <UI.Button onClick={counterIncrement}>+</UI.Button>
      </div>
    </div>
  )
}

ReactDOM.render(
  <DistributedCounter />,
  document.getElementById('DistributedCounter')
)
</script>
<!--
##########################
### Demo: GuestbookApp ###
##########################
-->

      <article class="br3 hidden ba b--black-10 mv4">
        <h1 class="f4 bg-orange light-yellow br3 br--top mv0 pv2 ph3">Demo: GuestbookApp</h1>
        <div class="pa3 bt bg-dark-gray b--white-10" id="GuestbookApp"></div>
      </article>
    

<pre class="code mono f6 bg-dark-gray pa3 lh-title" data-demo="GuestbookApp"><span class="token comment">// Demo: GuestbookApp</span>
<span class="token comment">// This demo app uses only Functional Components!</span>
<span class="token keyword">function</span> <span class="token function">GuestbookApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Nav</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GuestbookList</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GuestbookForm</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * The navigation bar
 */</span>
<span class="token keyword">function</span> <span class="token function">Nav</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>My Guestbook<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Contact<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">{</span><span class="token comment">/* Subscribe to the authentication state.
          NOTE: We use the Render Props technique here to localize updates
          to a single &lt;UI.NavBar.Item /&gt; component without requiring a new
          React component. */</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fiery.Auth</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span><span class="token comment">/* `authState` contains `loading`, `failed`, and `data` properties. */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>authState <span class="token operator">=&gt;</span>
          authState<span class="token punctuation">.</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Checking auth&#x2026;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">disabled</span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span> <span class="token punctuation">:</span> authState<span class="token punctuation">.</span>failed <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span>
              <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Auth checking failed<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">String</span><span class="token punctuation">(</span>authState<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&apos; (click to retry)&apos;</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>authState<span class="token punctuation">.</span>retry<span class="token punctuation">}</span></span>
            <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span> <span class="token punctuation">:</span> authState<span class="token punctuation">.</span>data <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span>
              <span class="token attr-name">label</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&apos;Sign Out (&apos;</span> <span class="token operator">+</span> authState<span class="token punctuation">.</span>data<span class="token punctuation">.</span>displayName <span class="token operator">+</span> <span class="token string">&apos;)&apos;</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>signOut<span class="token punctuation">}</span></span>
            <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Sign in with GitHub<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>signIn<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fiery.Auth</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.NavBar</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// The `signIn` and `signOut` functions uses the normal Firebase auth functions.</span>
<span class="token comment">// No new APIs to learn here!</span>
<span class="token comment">//</span>
<span class="token keyword">function</span> <span class="token function">signIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  firebase
    <span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">signInWithPopup</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">firebase<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>GithubAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Sorry, cannot sign in! </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&apos;RLY SIGN OUT?&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> firebase<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * The list of guestbook entries.
 */</span>
<span class="token keyword">function</span> <span class="token function">GuestbookList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// The `useFirebaseDatabase` hook makes this component automatically</span>
  <span class="token comment">// subscribe to Firebase Realtime Database. When the data change,</span>
  <span class="token comment">// this component is automatically re-rendered.</span>
  <span class="token comment">//</span>
  <span class="token keyword">const</span> guestbookState <span class="token operator">=</span> fiery<span class="token punctuation">.</span><span class="token function">useFirebaseDatabase</span><span class="token punctuation">(</span>
    firebase
      <span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&apos;demos/guestbook&apos;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">orderByChild</span><span class="token punctuation">(</span><span class="token string">&apos;time&apos;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">limitToLast</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.EntryList</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">{</span>guestbookState<span class="token punctuation">.</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Loading messages&#x2026;<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span> <span class="token punctuation">:</span> guestbookState<span class="token punctuation">.</span>failed <span class="token operator">?</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorMessage</span>
          <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>guestbookState<span class="token punctuation">.</span>error<span class="token punctuation">}</span></span>
          <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>guestbookState<span class="token punctuation">.</span>retry<span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>guestbookState<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>key <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.EntryList.Item</span>
            <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span>
            <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>guestbookState<span class="token punctuation">.</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">}</span></span>
            <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>guestbookState<span class="token punctuation">.</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.EntryList</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * The form to submit a guestbook entry.
 */</span>
<span class="token keyword">function</span> <span class="token function">GuestbookForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// The `useFirebaseAuth` hook makes this component automatically</span>
  <span class="token comment">// subscribe to Firebase Authentication state. When user signs in</span>
  <span class="token comment">// or signs out, this component will automatically update.</span>
  <span class="token comment">//</span>
  <span class="token keyword">const</span> userState <span class="token operator">=</span> fiery<span class="token punctuation">.</span><span class="token function">useFirebaseAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> userState<span class="token punctuation">.</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Checking authentication status&#x2026;<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span> <span class="token punctuation">:</span> userState<span class="token punctuation">.</span>failed <span class="token operator">?</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorMessage</span> <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>userState<span class="token punctuation">.</span>error<span class="token punctuation">}</span></span> <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>userState<span class="token punctuation">.</span>retry<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span> <span class="token punctuation">:</span> userState<span class="token punctuation">.</span>data <span class="token operator">?</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.EntryForm</span> <span class="token attr-name">onSend</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>text <span class="token operator">=&gt;</span> <span class="token function">submitForm</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> userState<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.AuthenticationWall</span> <span class="token attr-name">onSignIn</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>signIn<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Write to Firebase Realtime Database using the familiar Firebase SDK!</span>
<span class="token comment">//</span>
<span class="token keyword">function</span> <span class="token function">submitForm</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> firebase
    <span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&apos;demos/guestbook&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      time<span class="token punctuation">:</span> firebase<span class="token punctuation">.</span>database<span class="token punctuation">.</span>ServerValue<span class="token punctuation">.</span><span class="token constant">TIMESTAMP</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> user<span class="token punctuation">.</span>displayName<span class="token punctuation">,</span>
      text<span class="token punctuation">:</span> text
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Render the app...</span>
<span class="token comment">//</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GuestbookApp</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;GuestbookApp&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><script type="text/babel">// Demo: GuestbookApp
// This demo app uses only Functional Components!
function GuestbookApp() {
  return (
    <section>
      <Nav />
      <GuestbookList />
      <GuestbookForm />
    </section>
  )
}

/**
 * The navigation bar
 */
function Nav() {
  return (
    <UI.NavBar title="My Guestbook">
      <UI.NavBar.Item label="Contact" />
      {/* Subscribe to the authentication state.
          NOTE: We use the Render Props technique here to localize updates
          to a single <UI.NavBar.Item /> component without requiring a new
          React component. */}
      <fiery.Auth>
        {/* `authState` contains `loading`, `failed`, and `data` properties. */}
        {authState =>
          authState.loading ? (
            <UI.NavBar.Item label="Checking auth…" disabled />
          ) : authState.failed ? (
            <UI.NavBar.Item
              label="Auth checking failed"
              title={String(authState.error) + ' (click to retry)'}
              onClick={authState.retry}
            />
          ) : authState.data ? (
            <UI.NavBar.Item
              label={'Sign Out (' + authState.data.displayName + ')'}
              onClick={signOut}
            />
          ) : (
            <UI.NavBar.Item label="Sign in with GitHub" onClick={signIn} />
          )
        }
      </fiery.Auth>
    </UI.NavBar>
  )
}

// The `signIn` and `signOut` functions uses the normal Firebase auth functions.
// No new APIs to learn here!
//
function signIn() {
  firebase
    .auth()
    .signInWithPopup(new firebase.auth.GithubAuthProvider())
    .catch(e => window.alert(`Sorry, cannot sign in! ${e}`))
}
function signOut() {
  if (window.confirm('RLY SIGN OUT?')) firebase.auth().signOut()
}

/**
 * The list of guestbook entries.
 */
function GuestbookList() {
  // The `useFirebaseDatabase` hook makes this component automatically
  // subscribe to Firebase Realtime Database. When the data change,
  // this component is automatically re-rendered.
  //
  const guestbookState = fiery.useFirebaseDatabase(
    firebase
      .database()
      .ref('demos/guestbook')
      .orderByChild('time')
      .limitToLast(8)
  )
  return (
    <UI.EntryList>
      {guestbookState.loading ? (
        <UI.Loading message="Loading messages…" />
      ) : guestbookState.failed ? (
        <UI.ErrorMessage
          error={guestbookState.error}
          retry={guestbookState.retry}
        />
      ) : (
        Object.keys(guestbookState.data).map(key => (
          <UI.EntryList.Item
            key={key}
            text={guestbookState.data[key].text}
            name={guestbookState.data[key].name}
          />
        ))
      )}
    </UI.EntryList>
  )
}

/**
 * The form to submit a guestbook entry.
 */
function GuestbookForm() {
  // The `useFirebaseAuth` hook makes this component automatically
  // subscribe to Firebase Authentication state. When user signs in
  // or signs out, this component will automatically update.
  //
  const userState = fiery.useFirebaseAuth()
  return userState.loading ? (
    <UI.Loading message="Checking authentication status…" />
  ) : userState.failed ? (
    <UI.ErrorMessage error={userState.error} retry={userState.retry} />
  ) : userState.data ? (
    <UI.EntryForm onSend={text => submitForm(text, userState.data)} />
  ) : (
    <UI.AuthenticationWall onSignIn={signIn} />
  )
}

// Write to Firebase Realtime Database using the familiar Firebase SDK!
//
function submitForm(text, user) {
  return firebase
    .database()
    .ref('demos/guestbook')
    .push({
      time: firebase.database.ServerValue.TIMESTAMP,
      name: user.displayName,
      text: text
    })
}

// Render the app...
//
ReactDOM.render(<GuestbookApp />, document.getElementById('GuestbookApp'))
</script>
<!--
##########################
### Demo: SuspenseDemo ###
##########################
-->

      <article class="br3 hidden ba b--black-10 mv4">
        <h1 class="f4 bg-orange light-yellow br3 br--top mv0 pv2 ph3">Demo: SuspenseDemo</h1>
        <div class="pa3 bt bg-dark-gray b--white-10" id="SuspenseDemo"></div>
      </article>
    

<pre class="code mono f6 bg-dark-gray pa3 lh-title" data-demo="SuspenseDemo"><span class="token comment">// Demo: SuspenseDemo</span>
<span class="token comment">// In this demo, there are no checks for Loading/Error state.</span>
<span class="token comment">// Loading state is handled by React.Suspense.</span>
<span class="token comment">// Error state is handled by using an Error Boundary.</span>
<span class="token comment">// WARNING: Unstable API!</span>

<span class="token keyword">function</span> <span class="token function">SuspenseDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// Set up an Error Boundary to catch errors.</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorBoundary</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SectionSelector</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.ErrorBoundary</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SectionSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// `error` &#x2014; always results in an error.</span>
  <span class="token comment">// `protected` &#x2014; only logged in users can see. If you log out, you will get en error.</span>
  <span class="token comment">// `even` &#x2014; only accessible when the Counter (1st demo) contains an even number.</span>
  <span class="token keyword">const</span> sections <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&apos;intro&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;bridge&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;chorus&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;error&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;protected&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;even&apos;</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>currentSection<span class="token punctuation">,</span> setCurrentSection<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&apos;intro&apos;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Tabs</span>
        <span class="token attr-name">tabs</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>sections<span class="token punctuation">}</span></span>
        <span class="token attr-name">currentSection</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currentSection<span class="token punctuation">}</span></span>
        <span class="token attr-name">onTabChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>tab <span class="token operator">=&gt;</span> <span class="token function">setCurrentSection</span><span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ContentBox</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span><span class="token comment">/* Use `React.Suspense` to display a loading UI
            if any children is not ready to render */</span><span class="token punctuation">}</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>React.Suspense</span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SectionContent</span> <span class="token attr-name">sectionName</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currentSection<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>React.Suspense</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.ContentBox</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SectionContent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> sectionName <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dataRef <span class="token operator">=</span> firebase<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`demos/tabs/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sectionName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// Use `.unstable_read()` to read the data out of Firebase.</span>
  <span class="token comment">// Suspends rendering if data is not ready.</span>
  <span class="token keyword">const</span> text <span class="token operator">=</span> fiery<span class="token punctuation">.</span><span class="token function">useFirebaseDatabase</span><span class="token punctuation">(</span>dataRef<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unstable_read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>sectionName<span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>text<span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SuspenseDemo</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;SuspenseDemo&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><script type="text/babel">// Demo: SuspenseDemo
// In this demo, there are no checks for Loading/Error state.
// Loading state is handled by React.Suspense.
// Error state is handled by using an Error Boundary.
// WARNING: Unstable API!

function SuspenseDemo() {
  return (
    // Set up an Error Boundary to catch errors.
    <UI.ErrorBoundary>
      <SectionSelector />
    </UI.ErrorBoundary>
  )
}

function SectionSelector() {
  // `error` — always results in an error.
  // `protected` — only logged in users can see. If you log out, you will get en error.
  // `even` — only accessible when the Counter (1st demo) contains an even number.
  const sections = ['intro', 'bridge', 'chorus', 'error', 'protected', 'even']
  const [currentSection, setCurrentSection] = React.useState('intro')
  return (
    <section>
      <UI.Tabs
        tabs={sections}
        currentSection={currentSection}
        onTabChange={tab => setCurrentSection(tab)}
      />
      <UI.ContentBox>
        {/* Use `React.Suspense` to display a loading UI
            if any children is not ready to render */}
        <React.Suspense fallback={<UI.Loading />}>
          <SectionContent sectionName={currentSection} />
        </React.Suspense>
      </UI.ContentBox>
    </section>
  )
}

function SectionContent({ sectionName }) {
  const dataRef = firebase.database().ref(`demos/tabs/${sectionName}`)
  // Use `.unstable_read()` to read the data out of Firebase.
  // Suspends rendering if data is not ready.
  const text = fiery.useFirebaseDatabase(dataRef).unstable_read()
  return (
    <div>
      <strong>{sectionName}:</strong> {text}
    </div>
  )
}

ReactDOM.render(<SuspenseDemo />, document.getElementById('SuspenseDemo'))
</script>
<h2 id="api-usage" class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">API Usage</h2>
<p>fiery <img class="emoji" draggable="false" alt="&#x1F525;" src="https://twemoji.maxcdn.com/2/svg/1f525.svg"> provides both <a href="https://reactjs.org/hooks" class="light-pink">hooks</a>-based and <a href="https://reactjs.org/docs/render-props.html" class="light-pink">render props</a>-based APIs (<a href="https://twitter.com/dtinth/status/1055874999377047553" class="light-pink">rationale</a>).</p>
<p>The state object will contain <code class="light-green">loading</code>, <code class="light-green">failed</code>, <code class="light-green">data</code>, <code class="light-green">error</code>, and <code class="light-green">retry</code> properties. Or you can invoke an experimental method <code class="light-green">unstable_read()</code> to make React <a href="https://reactjs.org/docs/react-api.html#reactsuspense" class="light-pink">suspend</a> rendering until it is loaded.</p>
<h3 id="synopsis" class="gold mt5 f3 lh-title">Synopsis</h3>
<ul>
<li>
<p>Using Hooks</p>
<pre class="code mono f6 bg-dark-gray pa3 lh-title"><span class="token keyword">function</span> <span class="token function">HookSynopsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> counterState <span class="token operator">=</span> fiery<span class="token punctuation">.</span><span class="token function">useFirebaseDatabase</span><span class="token punctuation">(</span>counterRef<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>counterState<span class="token punctuation">.</span>loading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>counterState<span class="token punctuation">.</span>failed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorMessage</span>
        <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>error<span class="token punctuation">}</span></span>
        <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>retry<span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> counterState<span class="token punctuation">.</span>data
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</li>
<li>
<p>Using Render Props</p>
<pre class="code mono f6 bg-dark-gray pa3 lh-title"><span class="token keyword">function</span> <span class="token function">RenderPropsSynopsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fiery.Data</span> <span class="token attr-name">dataRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">{</span>counterState <span class="token operator">=&gt;</span>
        counterState<span class="token punctuation">.</span>loading <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token punctuation">:</span> counterState<span class="token punctuation">.</span>failed <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorMessage</span>
            <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>error<span class="token punctuation">}</span></span>
            <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterState<span class="token punctuation">.</span>retry<span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
          counterState<span class="token punctuation">.</span>data
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fiery.Data</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre>
</li>
<li>
<p>Suspense + Hooks</p>
<pre class="code mono f6 bg-dark-gray pa3 lh-title"><span class="token keyword">function</span> <span class="token function">SuspenseHookSynopsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> counterState <span class="token operator">=</span> fiery<span class="token punctuation">.</span><span class="token function">useFirebaseDatabase</span><span class="token punctuation">(</span>counterRef<span class="token punctuation">)</span>
  <span class="token keyword">return</span> counterState<span class="token punctuation">.</span><span class="token function">unstable_read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre>
</li>
<li>
<p>Suspense + Render Props</p>
<pre class="code mono f6 bg-dark-gray pa3 lh-title"><span class="token keyword">function</span> <span class="token function">SuspenseRenderPropsSynopsis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fiery.Data</span> <span class="token attr-name">dataRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>counterRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">{</span>counterState <span class="token operator">=&gt;</span> counterState<span class="token punctuation">.</span><span class="token function">unstable_read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fiery.Data</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre>
</li>
</ul>
<h3 id="fiery.datastate%3Ct%3E-%E2%80%94-representing-remote-data." class="gold mt5 f3 lh-title"><code>fiery.DataState&lt;T&gt;</code> &#x2014; Representing remote data.</h3>
<p>When loading data from remote sources, the data may not come immediately. In fiery, to represent this, we use a <code class="light-green">DataState&lt;T&gt;</code>, which is a plain JS object with these properties:</p>
<ul>
<li><code class="light-green">loading</code> &#x2014; A <strong class="light-yellow">boolean</strong> representing whether data is being actively loaded or not.</li>
<li><code class="light-green">failed</code> &#x2014; A <strong class="light-yellow">boolean</strong> representing whether data failed to load or not. <strong class="light-yellow">Note:</strong> When retrying, the <code class="light-green">failed</code> flag will stay <code class="light-green">true</code> until new data has been loaded successfully.</li>
<li><code class="light-green">data</code> &#x2014; The data of type <strong class="light-yellow">T</strong>. May be <code class="light-green">undefined</code> if <code class="light-green">loading || failed</code>.</li>
<li><code class="light-green">error</code> &#x2014; The <strong class="light-yellow">Error</strong>. May be <code class="light-green">undefined</code> if <code class="light-green">!failed</code>.</li>
<li><code class="light-green">retry</code> &#x2014; A <strong class="light-yellow">function</strong> that may be called to retry the operation. May be <code class="light-green">undefined</code> if <code class="light-green">!failed || loading</code>.</li>
</ul>
<p>If you use TypeScript, our typings file can help preventing you from accessing the <code class="light-green">data</code> in loading or failed state. Refer to this table.</p>
<table>
<thead>
<tr>
<th class="ba b--white-20 ph2"><code>loading</code></th>
<th class="ba b--white-20 ph2"><code>failed</code></th>
<th class="ba b--white-20 ph2"><code>data</code></th>
<th class="ba b--white-20 ph2"><code>error</code></th>
<th class="ba b--white-20 ph2"><code>retry</code></th>
<th class="ba b--white-20 ph2">Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="ba b--white-20 ph2"><code class="light-green">true</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">false</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">T | undefined</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">undefined</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">undefined</code></td>
<td class="ba b--white-20 ph2">Initial load</td>
</tr>
<tr>
<td class="ba b--white-20 ph2"><code class="light-green">true</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">true</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">T | undefined</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">Error</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">undefined</code></td>
<td class="ba b--white-20 ph2">Retrying</td>
</tr>
<tr>
<td class="ba b--white-20 ph2"><code class="light-green">false</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">false</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">T</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">undefined</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">undefined</code></td>
<td class="ba b--white-20 ph2">Completed</td>
</tr>
<tr>
<td class="ba b--white-20 ph2"><code class="light-green">false</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">true</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">T | undefined</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">Error</code></td>
<td class="ba b--white-20 ph2"><code class="light-green">() =&gt; void</code></td>
<td class="ba b--white-20 ph2">Error</td>
</tr>
</tbody>
</table>
<h3 id="fiery.usefirebaseauth()" class="gold mt5 f3 lh-title"><code>fiery.useFirebaseAuth()</code></h3>
<p>Subscribe and use authentication state.</p>
<ul>
<li>Returns a <code class="light-green">fiery.DataState&lt;firebase.User | null&gt;</code> wrapping a <a href="https://firebase.google.com/docs/reference/js/firebase.User" class="light-pink"><code>firebase.User</code></a> object (if signed in) or <code class="light-green">null</code> (if signed out).</li>
</ul>
<h3 id="fiery.auth" class="gold mt5 f3 lh-title"><code>fiery.Auth</code></h3>
<p>Render prop version of <code class="light-green">fiery.useFirebaseAuth</code>.</p>
<p>Takes a single prop:</p>
<ul>
<li><code class="light-green">children</code> &#x2014; A <strong class="light-yellow">function</strong> that determines how the authentication state should be rendered.
It will be called with a <code class="light-green">RemoteDataState</code> wrapping a <a href="https://firebase.google.com/docs/reference/js/firebase.User" class="light-pink"><code>firebase.User</code></a> object (if signed in) or <code class="light-green">null</code> (if signed out).</li>
</ul>
<h3 id="fiery.usefirebasedatabase(dataref%3A-firebase.database.query)" class="gold mt5 f3 lh-title"><code>fiery.useFirebaseDatabase(dataRef: firebase.database.Query)</code></h3>
<p>Subscribe and use data from Firebase Realtime Database.</p>
<ul>
<li><code class="light-green">dataRef</code> &#x2014; A <a href="https://firebase.google.com/docs/reference/js/firebase.database.Reference" class="light-pink"><code>firebase.database.Reference</code></a> representing the data reference to fetch.</li>
<li>Returns a <code class="light-green">fiery.DataState&lt;any&gt;</code> wrapping the data (if it exists) or <code class="light-green">null</code> otherwise.
<ul>
<li>It also contains an <em>unstable</em> method, <code class="light-green">unstable_read()</code> for reading data synchronously. It <a href="https://reactjs.org/docs/react-api.html#reactsuspense" class="light-pink">suspends rendering</a> if data from Firebase is not ready. Note that this uses an <em>unstable</em> API and is subject to change.</li>
</ul>
</li>
</ul>
<h3 id="fiery.data" class="gold mt5 f3 lh-title"><code>fiery.Data</code></h3>
<p>Render prop version of <code class="light-green">fiery.useFirebaseDatabase</code>.</p>
<p>Takes two props:</p>
<ul>
<li><code class="light-green">dataRef</code> &#x2014; A <a href="https://firebase.google.com/docs/reference/js/firebase.database.Reference" class="light-pink"><code>firebase.database.Reference</code></a> representing the data reference to fetch.</li>
<li><code class="light-green">children</code> &#x2014; A <strong class="light-yellow">function</strong> that determines how the data state should be rendered.
It will be called with a <code class="light-green">fiery.DataState&lt;any&gt;</code> wrapping the data (if it exists) or <code class="light-green">null</code> otherwise.</li>
</ul>
<h3 id="looking-for-firebase-firestore-bindings%3F" class="gold mt5 f3 lh-title">Looking for Firebase Firestore bindings?</h3>
<p>Please contribute!</p>
<h2 id="development" class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">Development</h2>
<p>This project uses Yarn.</p>
<h3 id="dependencies" class="gold mt5 f3 lh-title">Dependencies</h3>
<p>To install dependencies, run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn
</code></pre>
<h3 id="development-2" class="gold mt5 f3 lh-title">Development</h3>
<p>Run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn dev
</code></pre>
<p>This will run Rollup in watch mode and generate <code class="light-green">umd/fiery.js</code>.
It will also re-generate the documentation site on change.</p>
<h3 id="building" class="gold mt5 f3 lh-title">Building</h3>
<p>To build the library once, run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn build
</code></pre>
<p>This will generate <code class="light-green">umd/fiery.js</code>.</p>
<h3 id="docs" class="gold mt5 f3 lh-title">Docs</h3>
<p>The documentation website is generated from <code class="light-green">README.md</code>.</p>
<p>To generate the docs, run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn docs
</code></pre>
<h2 id="license" class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">License</h2>
<p>MIT.</p>

