<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.9.0/css/tachyons.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cousine:400" />
  <style>
    pre, code, .mono { font-family: Cousine, monospace; }
    img.emoji { height: 1em; width: 1em; margin: 0 .05em 0 .1em; vertical-align: -0.1em; }
    /**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #f8f8f2;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}

  </style>
  <title>fiery</title>
</head>
<body class="bg-near-black light-gray f4 sans-serif">
<!--
###########################################################
### THIS FILE IS AUTOMATICALLY GENERATED FROM README.md ###
###########################################################
-->
<main class="mw7 pb5 center lh-copy">
<h1 class="yellow f-headline lh-solid mb0">fiery <img class="emoji" draggable="false" alt="&#x1F525;" src="https://twemoji.maxcdn.com/2/svg/1f525.svg"></h1>
<p class="f2 mt2">Some components to make it easy to use Firebase with React.</p>
<h2 class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">Installation</h2>
<p>You can install fiery from npm:</p>
<pre class="washed-green bg-dark-green pa3"><code>npm install --save fiery
</code></pre>
<h2 class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">Demo</h2>
<!--
#######################
### Require scripts ###
#######################
-->

      <script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
      <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
      <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
      <script src="https://www.gstatic.com/firebasejs/4.6.1/firebase.js"></script>
      <script>
        var config = {
          apiKey: "AIzaSyDLDD_KtKkfAj9sgOHupxUuDt_p8g19bkU",
          authDomain: "fiery-react.firebaseapp.com",
          databaseURL: "https://fiery-react.firebaseio.com",
          projectId: "fiery-react",
          storageBucket: "",
          messagingSenderId: "284926450412"
        };
        firebase.initializeApp(config);
      </script>
      <script src="https://unpkg.com/fiery@0.0.1/umd/fiery.js"></script>
    


<!--
##############
### UI kit ###
##############
-->
<script type="text/babel">
window.UI = (function () {
  function Button ({ children, onClick }) {
    return (
      <a
        className='f6 link dim br2 ph3 pv2 dib white bg-dark-blue'
        href='javascript://'
        onClick={onClick}
      >
        {children}
      </a>
    )
  }

  function ErrorMessage ({ error, retry }) {
    return (
      <div className='pa2 bg-washed-red br2'>
        <strong className='dark-red'>Something went wrong!</strong> {String(error)}
        {!!retry && <div><Button onClick={retry}>Retry</Button></div>}
      </div>
    )
  }

  function Loading ({ message }) {
    return (
      <div>
        <em>{message}</em>
      </div>
    )
  }

  function AuthenticationWall ({ onSignIn }) {
    return (
      <div className='pa3 tc bg-white-10'>
        <strong className='db mb2'>Sign in to write on this guestbook</strong>
        <Button onClick={onSignIn}>Sign in with GitHub</Button>
      </div>
    )
  }

  function NavBar ({ title, children }) {
    return (
      <nav className='dt w-100 border-box pa2 ph3 bg-purple'>
        <a className='dtc v-mid white-60 link dim w-25' href='#' title='Home'>
          {title}
        </a>
        <div className='dtc v-mid w-75 tr'>
          {children}
        </div>
      </nav>
    )
  }

  NavBar.Item = function NavBarItem ({ label, onClick, disabled, title }) {
    if (disabled) {
      return <span className='white-40 f6 f5-ns dib ml3'>{label}</span>
    }
    return (
      <a
        className='link dim white-70 f6 f5-ns dib ml3'
        href='javascript://'
        title={title}
        onClick={onClick}
      >
        {label}
      </a>
    )
  }

  function EntryList ({ children }) {
    return (
      <div className='pa3 bg-black-50'>
        {children}
      </div>
    )
  }
  EntryList.Item = function EntryListItem ({ text, name }) {
    return <div><strong>{name}: </strong>{text}</div>
  }

  function GuestbookInputField () {
    return (
      <div className='cf'>
        <input className='f6 f5-l input-reset bn fl black-80 bg-white pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns sans-serif' placeholder='What’s on your mind?' type='text' name='text' />
        <input className='f6 f5-l button-reset fl pv3 tc bn bg-animate bg-black-70 hover-bg-black white pointer w-100 w-25-m w-20-l br2-ns br--right-ns sans-serif' type='submit' value='Send' />
      </div>
    )
  }
  function EntryForm ({ onSend }) {
    return (
      <form
        className='bg-white-10 pa3'
        onSubmit={e => {
          const text = e.target.text.value
          e.target.text.value = ''
          e.preventDefault()
          onSend(text)
        }}
      >
        <GuestbookInputField />
      </form>
    )
  }

  return {
    Button,
    ErrorMessage,
    Loading,
    AuthenticationWall,
    NavBar,
    EntryList,
    EntryForm
  }
})()

</script>


<!--
##########################
### Demo: GuestbookApp ###
##########################
-->

      <article class="br3 hidden ba b--black-10 mv4">
        <h1 class="f4 bg-orange light-yellow br3 br--top mv0 pv2 ph3">Demo: GuestbookApp</h1>
        <div class="pa3 bt bg-dark-gray b--white-10" id="GuestbookApp"></div>
      </article>
    

<pre class="code mono f6 bg-dark-gray pa3 lh-title" data-demo="GuestbookApp"><span class="token comment">// Demo: GuestbookApp</span>
<span class="token comment">// This demo app uses only Stateless Functional Components!</span>
<span class="token keyword">function</span> <span class="token function">GuestbookApp</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Nav</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GuestbookList</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GuestbookForm</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// The navigation bar</span>
<span class="token keyword">function</span> <span class="token function">Nav</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&apos;</span>My Guestbook<span class="token punctuation">&apos;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&apos;</span>Contact<span class="token punctuation">&apos;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">{</span><span class="token comment">/* Subscribe to the authentication state */</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fiery.Auth</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span><span class="token comment">/* Data is represented in 3 states: &apos;loading&apos;, &apos;completed&apos; and &apos;error&apos;.
            Use `fiery.unwrap` to handle all these 3 cases. */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span>authState<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fiery<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span>authState<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          loading<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&apos;</span>Checking auth&#x2026;<span class="token punctuation">&apos;</span></span> <span class="token attr-name">disabled</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
          completed<span class="token punctuation">:</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            user <span class="token operator">?</span> <span class="token punctuation">(</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span>
                <span class="token attr-name">label</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token string">&apos;Sign Out (&apos;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span>displayName <span class="token operator">+</span> <span class="token string">&apos;)&apos;</span><span class="token punctuation">}</span></span>
                <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>signOut<span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span>
            <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span>
                <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&apos;</span>Sign in with GitHub<span class="token punctuation">&apos;</span></span>
                <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>signIn<span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          error<span class="token punctuation">:</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> retry<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.NavBar.Item</span>
              <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&apos;</span>Auth checking failed<span class="token punctuation">&apos;</span></span>
              <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token function">String</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&apos; (click to retry)&apos;</span><span class="token punctuation">}</span></span>
              <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>retry<span class="token punctuation">}</span></span>
            <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fiery.Auth</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.NavBar</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// The `signIn` and `signOut` functions uses the normal Firebase auth functions.</span>
<span class="token comment">// No new APIs to learn here!</span>
<span class="token keyword">function</span> <span class="token function">signIn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  firebase<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signInWithPopup</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">firebase<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>GithubAuthProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> window<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Sorry, cannot sign in! </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">signOut</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&apos;RLY SIGN OUT?&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> firebase<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// The guestbook entry list.</span>
<span class="token keyword">function</span> <span class="token function">GuestbookList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dataRef <span class="token operator">=</span> firebase<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&apos;demos/guestbook&apos;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">orderByKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">limitToLast</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.EntryList</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">{</span><span class="token comment">/* Subscribe to Firebase Realtime Database */</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fiery.Data</span> <span class="token attr-name">dataRef</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>dataRef<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span>guestbookState<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fiery<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span>guestbookState<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          loading<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&apos;</span>Loading messages&#x2026;<span class="token punctuation">&apos;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
          completed<span class="token punctuation">:</span> <span class="token punctuation">(</span>guestbook<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>guestbook<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>key <span class="token operator">=&gt;</span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.EntryList.Item</span>
                <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span>
                <span class="token attr-name">text</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>guestbook<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">}</span></span>
                <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>guestbook<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span>
              <span class="token punctuation">/&gt;</span></span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          error<span class="token punctuation">:</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorMessage</span> <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span></span> <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>retry<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fiery.Data</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UI.EntryList</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// The form to submit a guestbook entry.</span>
<span class="token keyword">function</span> <span class="token function">GuestbookForm</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fiery.Auth</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">{</span>userState <span class="token operator">=&gt;</span> fiery<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span>userState<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loading<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.Loading</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&apos;</span>Checking authentication status&#x2026;<span class="token punctuation">&apos;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span>
        completed<span class="token punctuation">:</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          user <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.EntryForm</span> <span class="token attr-name">onSend</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">submitForm</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.AuthenticationWall</span> <span class="token attr-name">onSignIn</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>signIn<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UI.ErrorMessage</span> <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span></span> <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>retry<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fiery.Auth</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Write to Firebase Realtime Database using the familiar Firebase SDK APIs!</span>
<span class="token keyword">function</span> <span class="token function">submitForm</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  firebase<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&apos;demos/guestbook&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    time<span class="token punctuation">:</span> firebase<span class="token punctuation">.</span>database<span class="token punctuation">.</span>ServerValue<span class="token punctuation">.</span>TIMESTAMP<span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> user<span class="token punctuation">.</span>displayName<span class="token punctuation">,</span>
    text<span class="token punctuation">:</span> text
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Render the app..</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GuestbookApp</span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&apos;GuestbookApp&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><script type="text/babel">// Demo: GuestbookApp
// This demo app uses only Stateless Functional Components!
function GuestbookApp () {
  return (
    <section>
      <Nav />
      <GuestbookList />
      <GuestbookForm />
    </section>
  )
}

// The navigation bar
function Nav () {
  return (
    <UI.NavBar title='My Guestbook'>
      <UI.NavBar.Item label='Contact' />
      {/* Subscribe to the authentication state */}
      <fiery.Auth>
        {/* Data is represented in 3 states: 'loading', 'completed' and 'error'.
            Use `fiery.unwrap` to handle all these 3 cases. */}
        {(authState) => fiery.unwrap(authState, {
          loading: () =>
            <UI.NavBar.Item label='Checking auth…' disabled />,
          completed: (user) =>
            user ? (
              <UI.NavBar.Item
                label={'Sign Out (' + user.displayName + ')'}
                onClick={signOut}
              />
            ) : (
              <UI.NavBar.Item
                label='Sign in with GitHub'
                onClick={signIn}
              />
            ),
          error: (error, retry) =>
            <UI.NavBar.Item
              label='Auth checking failed'
              title={String(error) + ' (click to retry)'}
              onClick={retry}
            />
        })}
      </fiery.Auth>
    </UI.NavBar>
  )
}

// The `signIn` and `signOut` functions uses the normal Firebase auth functions.
// No new APIs to learn here!
function signIn () {
  firebase.auth().signInWithPopup(new firebase.auth.GithubAuthProvider())
    .catch(e => window.alert(`Sorry, cannot sign in! ${e}`))
}
function signOut () {
  if (window.confirm('RLY SIGN OUT?')) firebase.auth().signOut()
}

// The guestbook entry list.
function GuestbookList () {
  const dataRef = firebase.database()
    .ref('demos/guestbook')
    .orderByKey()
    .limitToLast(8)

  return (
    <UI.EntryList>
      {/* Subscribe to Firebase Realtime Database */}
      <fiery.Data dataRef={dataRef}>
        {(guestbookState) => fiery.unwrap(guestbookState, {
          loading: () =>
            <UI.Loading message='Loading messages…' />,
          completed: (guestbook) =>
            Object.keys(guestbook).map(key =>
              <UI.EntryList.Item
                key={key}
                text={guestbook[key].text}
                name={guestbook[key].name}
              />
            ),
          error: (error) =>
            <UI.ErrorMessage error={error} retry={retry} />
        })}
      </fiery.Data>
    </UI.EntryList>
  )
}

// The form to submit a guestbook entry.
function GuestbookForm () {
  return (
    <fiery.Auth>
      {userState => fiery.unwrap(userState, {
        loading: () =>
          <UI.Loading message='Checking authentication status…' />,
        completed: (user) =>
          user ? (
            <UI.EntryForm onSend={(text) => submitForm(text, user)} />
          ) : (
            <UI.AuthenticationWall onSignIn={signIn} />
          ),
        error: (error) =>
          <UI.ErrorMessage error={error} retry={retry} />
      })}
    </fiery.Auth>
  )
}

// Write to Firebase Realtime Database using the familiar Firebase SDK APIs!
function submitForm (text, user) {
  firebase.database().ref('demos/guestbook').push({
    time: firebase.database.ServerValue.TIMESTAMP,
    name: user.displayName,
    text: text
  })
}

// Render the app..
ReactDOM.render(<GuestbookApp />, document.getElementById('GuestbookApp'))
</script>
<h2 class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">API Usage</h2>
<h3 class="gold mt5 f3 lh-title"><code>fiery.unwrap</code> &#x2014; Working with remote data states</h3>
<p>Data from Firebase is wrapped in a <code class="light-green">RemoteDataState</code> object, which can represent 3 states:</p>
<ul>
<li><strong class="light-yellow">loading</strong> &#x2014; when data is being fetched.</li>
<li><strong class="light-yellow">completed</strong> &#x2014; when data is available.</li>
<li><strong class="light-yellow">error</strong> &#x2014; when data cannot be fetched.</li>
</ul>
<p>Use the <code class="light-green">fiery.unwrap()</code> function to unwrap it. It accepts 2 arguments:</p>
<ul>
<li><code class="light-green">state</code> &#x2014; The <code class="light-green">RemoteDataState</code> object to unwrap.</li>
<li><code class="light-green">spec</code> &#x2014; An <strong class="light-yellow">object</strong> specifying how to unwrap this object in each state. Should contain 3 methods:
<ul>
<li><code class="light-green">loading()</code> &#x2014; for <strong class="light-yellow">loading</strong> state</li>
<li><code class="light-green">completed(data)</code> &#x2014; for <strong class="light-yellow">completed</strong> state</li>
<li><code class="light-green">error(error, retry)</code> &#x2014; for <strong class="light-yellow">error</strong> state</li>
</ul>
</li>
</ul>
<pre class="code mono f6 bg-dark-gray pa3 lh-title"><span class="token comment">// Example: Unwrapping a RemoteDataState into a React element.</span>
fiery<span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span>dataState<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loading<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Loading data&#x2026;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  completed<span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Data is <span class="token punctuation">{</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> <span class="token punctuation">(</span>error<span class="token punctuation">,</span> retry<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ErrorMessage</span> <span class="token attr-name">error</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>error<span class="token punctuation">}</span></span> <span class="token attr-name">retry</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>retry<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre>
<h3 class="gold mt5 f3 lh-title"><code>fiery.Auth</code> &#x2014; Subscribe to authentication state</h3>
<p>Takes a single prop:</p>
<ul>
<li><code class="light-green">children</code> &#x2014; A <strong class="light-yellow">function</strong> that determines how the authentication state should be rendered.
Will be called with a <code class="light-green">RemoteDataState</code> wrapping a <a href="https://firebase.google.com/docs/reference/js/firebase.User" class="light-pink"><code>firebase.User</code></a> object (if signed in) or <code class="light-green">null</code> (if signed out).</li>
</ul>
<h3 class="gold mt5 f3 lh-title"><code>fiery.Data</code> &#x2014; Subscribe to Realtime Database</h3>
<p>Takes two props:</p>
<ul>
<li><code class="light-green">dataRef</code> &#x2014; A <a href="https://firebase.google.com/docs/reference/js/firebase.database.Reference" class="light-pink"><code>firebase.database.Reference</code></a> representing the data reference to fetch.</li>
<li><code class="light-green">children</code> &#x2014; A <strong class="light-yellow">function</strong> that determines how the data state should be rendered.
Will be called with a <code class="light-green">RemoteDataState</code> wrapping the data.</li>
</ul>
<h2 class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">Development</h2>
<p>This project uses Yarn.</p>
<h3 class="gold mt5 f3 lh-title">Dependencies</h3>
<p>To install dependencies, run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn
</code></pre>
<h3 class="gold mt5 f3 lh-title">Development</h3>
<p>Run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn dev
</code></pre>
<p>This will run Rollup in watch mode and generate <code class="light-green">umd/fiery.js</code>.
It will also re-generate the documentation site on change.</p>
<h3 class="gold mt5 f3 lh-title">Building</h3>
<p>To build the library once, run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn build
</code></pre>
<p>This will generate <code class="light-green">umd/fiery.js</code>.</p>
<h3 class="gold mt5 f3 lh-title">Docs</h3>
<p>The documentation website is generated from <code class="light-green">README.md</code>.</p>
<p>To generate the docs, run:</p>
<pre class="washed-green bg-dark-green pa3"><code>yarn docs
</code></pre>
<h2 class="yellow bt b--orange bw3 mt5 pt4 f1 lh-title">License</h2>
<p>MIT.</p>

